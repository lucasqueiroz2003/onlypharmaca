<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Cliente - Only Pharma</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="index.html" class="logo"><i class="fas fa-dna"></i> Only Pharma</a>
            <ul class="nav-menu">
                <li><a href="index.html">Início</a></li>
                <li><a href="produtos.html">Produtos</a></li>
                <li><a href="blog.html">Depoimentos</a></li>
                <li><a href="posts.html">Artigos</a></li>
                <li><a href="cadastro.html">Cadastro</a></li>
                <li><a href="admin.html">Admin</a></li>
                <li><a href="carrinho.html" class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </a></li>
            </ul>
        </nav>
    </header>

    <section class="container">
        <div class="section-title">
            <h1>Cadastro de Cliente</h1>
            <p>Cadastre-se para receber ofertas exclusivas e acompanhar seus pedidos</p>
        </div>

        <div style="max-width: 800px; margin: 0 auto; background: var(--bg-card); padding: 3rem; border-radius: 20px; border: 1px solid var(--border-color);">
            <form id="formCadastro">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Nome Completo *</label>
                    <input type="text" id="nome" required placeholder="Digite seu nome completo">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> E-mail *</label>
                        <input type="email" id="email" required placeholder="seu@email.com">
                    </div>

                    <div class="form-group">
                        <label><i class="fas fa-phone"></i> Telefone *</label>
                        <input type="tel" id="telefone" required placeholder="(00) 00000-0000">
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-id-card"></i> CPF *</label>
                    <input type="text" id="cpf" required placeholder="000.000.000-00">
                </div>

                <div class="form-group">
                    <label><i class="fas fa-map-marked-alt"></i> Endereço Completo *</label>
                    <input type="text" id="endereco" required placeholder="Rua, número, complemento">
                </div>

                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 1.5rem;">
                    <div class="form-group">
                        <label><i class="fas fa-city"></i> Cidade *</label>
                        <input type="text" id="cidade" required placeholder="Sua cidade">
                    </div>

                    <div class="form-group">
                        <label><i class="fas fa-map"></i> Estado *</label>
                        <select id="estado" required>
                            <option value="">UF</option>
                            <option value="AC">AC</option>
                            <option value="AL">AL</option>
                            <option value="AP">AP</option>
                            <option value="AM">AM</option>
                            <option value="BA">BA</option>
                            <option value="CE">CE</option>
                            <option value="DF">DF</option>
                            <option value="ES">ES</option>
                            <option value="GO">GO</option>
                            <option value="MA">MA</option>
                            <option value="MT">MT</option>
                            <option value="MS">MS</option>
                            <option value="MG">MG</option>
                            <option value="PA">PA</option>
                            <option value="PB">PB</option>
                            <option value="PR">PR</option>
                            <option value="PE">PE</option>
                            <option value="PI">PI</option>
                            <option value="RJ">RJ</option>
                            <option value="RN">RN</option>
                            <option value="RS">RS</option>
                            <option value="RO">RO</option>
                            <option value="RR">RR</option>
                            <option value="SC">SC</option>
                            <option value="SP">SP</option>
                            <option value="SE">SE</option>
                            <option value="TO">TO</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label><i class="fas fa-mail-bulk"></i> CEP *</label>
                        <input type="text" id="cep" required placeholder="00000-000">
                    </div>
                </div>

                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 10px; border: 1px solid var(--purple-primary); margin: 2rem 0;">
                    <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                        <i class="fas fa-info-circle" style="color: var(--cyan);"></i>
                        Seus dados são protegidos e serão utilizados apenas para processamento de pedidos e comunicação relacionada aos produtos.
                    </p>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-user-plus"></i> Cadastrar
                </button>
            </form>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Only Pharma</h3>
                <div class="contact-info"><i class="fas fa-map-marker-alt"></i> Toronto, Canada</div>
            </div>
            <div class="footer-section">
                <h3>Contato</h3>
                <div class="contact-info"><i class="fab fa-whatsapp"></i> <a href="https://wa.me/5565998074000">+55 65 99807-4000</a></div>
                <div class="contact-info"><i class="fas fa-envelope"></i> <a href="mailto:onlyzlucas@gmail.com">onlyzlucas@gmail.com</a></div>
            </div>
        </div>
        <div class="footer-bottom"><p>&copy; 2025 Only Pharma.</p></div>
    </footer>

    <script>
        // Máscaras
        document.getElementById('telefone').addEventListener('input', (e) => {
            let v = e.target.value.replace(/\D/g, '');
            v = v.replace(/^(\d{2})(\d)/g, '($1) $2');
            v = v.replace(/(\d)(\d{4})$/, '$1-$2');
            e.target.value = v;
        });

        document.getElementById('cpf').addEventListener('input', (e) => {
            let v = e.target.value.replace(/\D/g, '');
            v = v.replace(/(\d{3})(\d)/, '$1.$2');
            v = v.replace(/(\d{3})(\d)/, '$1.$2');
            v = v.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            e.target.value = v;
        });

        document.getElementById('cep').addEventListener('input', (e) => {
            let v = e.target.value.replace(/\D/g, '');
            v = v.replace(/(\d{5})(\d)/, '$1-$2');
            e.target.value = v;
        });

        document.getElementById('formCadastro').addEventListener('submit', async (e) => {
            e.preventDefault();

            const cliente = {
                id: 'cli_' + Date.now(),
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                cpf: document.getElementById('cpf').value,
                endereco: document.getElementById('endereco').value,
                cidade: document.getElementById('cidade').value,
                estado: document.getElementById('estado').value,
                cep: document.getElementById('cep').value
            };

            try {
                await fetch('tables/clientes', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(cliente)
                });

                alert('Cadastro realizado com sucesso! Bem-vindo à Only Pharma!');
                document.getElementById('formCadastro').reset();
            } catch (error) {
                alert('Erro ao realizar cadastro. Tente novamente.');
            }
        });

        // Contador carrinho
        document.addEventListener('DOMContentLoaded', () => {
            const carrinho = JSON.parse(localStorage.getItem('carrinho') || '[]');
            document.getElementById('cartCount').textContent = carrinho.reduce((s, i) => s + i.quantidade, 0);
        });
    </script>
</body>
</html>
